<div class="modal-header">Редактировать расход</div>
<form hx-post="{{ url_for('consumptions_update', item_id=rec.id) }}"
      hx-target="#modal-body"
      hx-swap="innerHTML"
      class="form-grid">
  <div>
    <label>Материал</label>
    <select name="material_id" required>
      {% for m in materials %}
        <option value="{{ m.id }}" {% if m.id == rec.material_id %}selected{% endif %}>{{ m.short_name or m.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div>
    <label>Сотрудник</label>
    <select name="employee_id" required>
      {% for u in users %}
        <option value="{{ u.id }}" {% if u.id == rec.employee_id %}selected{% endif %}>{{ u.first_name or '' }} {{ u.last_name or '' }}</option>
      {% endfor %}
    </select>
  </div>
  <div>
    <label>Количество</label>
    <input type="number" name="amount" min="0.001" step="0.001" value="{{ rec.amount }}" required />
  </div>
  <div>
    <label>Дата</label>
    <input type="date" name="date" value="{{ rec.date }}" required />
  </div>
  <div class="modal-actions" style="grid-column: 1 / -1;">
    <button type="button" class="btn-outline" onclick="window.dispatchEvent(new CustomEvent('close-modal'))">Отмена</button>
    <button type="submit" class="btn">Сохранить</button>
  </div>
</form>
